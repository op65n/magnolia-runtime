From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: sebba <sebba@op65n.org>
Date: Fri, 13 May 2022 03:33:29 +0200
Subject: [PATCH] better logger pattern


diff --git a/src/main/resources/log4j2.xml b/src/main/resources/log4j2.xml
index 74ccc67e3c12dc5182602fb691ef3ddeb5b53280..5997e8f713419b9fd7e30fe590b99a9eeecaf6eb 100644
--- a/src/main/resources/log4j2.xml
+++ b/src/main/resources/log4j2.xml
@@ -1,18 +1,29 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <Configuration status="WARN" packages="com.mojang.util" shutdownHook="disable">
+    <Properties>
+        <Property name="LOG_PATTERN">
+            %-p @%c{1} %d{yyyy-MM-dd HH:mm:ss} ❯ %m%n
+        </Property>
+
+        <Property name="CONSOLE_LEVEL">
+            %highlight{%-p}{FATAL=bg_red black, ERROR=bg_red black, WARN=bg_yellow black, INFO=white, DEBUG=green, TRACE=blue}
+        </Property>
+
+        <Property name="CONSOLE_STAMP">
+            %style{%d{yyyy-MM-dd HH:mm:ss}}{magenta} %style{%c{1}}{cyan}
+        </Property>
+
+        <Property name="CONSOLE_MESSAGE">
+            %highlight{❯ %m%n}{FATAL=red, ERROR=red, WARN=yellow, INFO=white, DEBUG=green, TRACE=blue}
+        </Property>
+    </Properties>
+
     <Appenders>
         <Queue name="ServerGuiConsole">
             <PatternLayout pattern="[%d{HH:mm:ss} %level]: %msg%n" />
         </Queue>
         <TerminalConsole name="TerminalConsole">
-            <PatternLayout>
-                <LoggerNamePatternSelector defaultPattern="%highlightError{[%d{HH:mm:ss} %level]: [%logger] %paperMinecraftFormatting{%msg}%n%xEx{full}}">
-                    <!-- Log root, Minecraft, Mojang and Bukkit loggers without prefix -->
-                    <!-- Disable prefix for various plugins that bypass the plugin logger -->
-                    <PatternMatch key=",net.minecraft.,Minecraft,com.mojang.,com.sk89q.,ru.tehkode.,Minecraft.AWE"
-                                  pattern="%highlightError{[%d{HH:mm:ss} %level]: %paperMinecraftFormatting{%msg}%n%xEx{full}}" />
-                </LoggerNamePatternSelector>
-            </PatternLayout>
+            <PatternLayout pattern="${CONSOLE_LEVEL} ${CONSOLE_STAMP} ${CONSOLE_MESSAGE}" />
         </TerminalConsole>
         <RollingRandomAccessFile name="File" fileName="logs/latest.log" filePattern="logs/%d{yyyy-MM-dd}-%i.log.gz">
             <PatternLayout>
